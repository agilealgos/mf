!function(e){"use strict";var t=function(){var t=this;this.init=function(){this.$productPage=e("div.product"),this.general(),this.reviewsBtn(),this.addedToCartText(),this.fsSkinErrors(),this.runLazyReviews(),this.runLazyRelated(),this.runLazyUpsells(),this.events()},this.events=function(){rey.hooks.addAction("product/loaded",(function(t){void 0!==e.fn.wc_variation_form&&t.forEach((t=>{var a=t.querySelector(".variations_form");a&&e(a).wc_variation_form()}))})),e(document).on("focus",".rey-cartBtnQty input.--select-text",(function(t){var a=t.currentTarget;a.type="text",a.setSelectionRange(0,a.value.length),e(a).hasClass("--prevent-focus")||(a.type="number")})),rey.hooks.addAction("first_interaction",(function(){setTimeout((function(){t.customTextNearPrice()}),2e3)}))},this.reviewsBtn=function(){var t=e(".js-reviewsBtn",this.$productPage);if(t.length){var a=e(".rey-wcPanel--reviews #reviews",this.$productPage);t.hasClass("--toggled")&&!a.is(":visible")?a.slideDown("fast"):!t.hasClass("--toggled")&&a.is(":visible")&&a.hide(),t.on("click",(function(t){t.preventDefault();var r=e(this);r.hasClass("--toggled")?(r.removeClass("--toggled"),a.css("display","block").slideUp("fast")):(r.addClass("--toggled"),a.slideDown("fast"))})),e(".woocommerce-review-link",this.$productPage).on("click",(function(r){if(t.length){var o=t.offset().top;o&&(r.preventDefault(),e("html, body").animate({scrollTop:o-30},500)),a.is(":visible")||t.click()}}))}},this.addedToCartText=function(){e(document.body).on("added_to_cart",(function(t,a,r,o){if(void 0!==rey.params.added_to_cart_text){var i,s=rey.params.added_to_cart_text;if(o&&o.hasClass("single_add_to_cart_button")&&!o.hasClass("elementor-button")&&(i=o,o=e(".single_add_to_cart_button-text",o)),o){var n=o.text();o.text(s);var c=parseInt(rey.params.added_to_cart_text_timeout||0);c&&setTimeout((function(){o.text(n),i&&i.removeClass("added")}),c)}}}))},this.fsSkinErrors=function(){if(!rey.vars.is_desktop){var t=e(".single-skin--fullscreen .woocommerce-notices-wrapper");t.length&&t.detach().prependTo(this.$productPage)}},this.general=function(){e('.rey-wcPanel--description iframe[src*="youtu"], .woocommerce-Tabs-panel--description iframe[src*="youtu"], .woocommerce-product-details__short-description iframe[src*="youtu"]').each((function(){var t=e(this);t.closest(".embed-responsive").length||t.wrap("<div class='embed-responsive embed-responsive-16by9'></div>")})),e('.rey-qtySelect ~ input[name="quantity"]').remove()},this.ajaxLoadMoreReviews=function(){e(document).on("click",".rey-ajaxRatings-addBtn, .rey-reviewTop-add",(function(t){t.preventDefault();var a=e("#review_form_wrapper"),r=a.offset().top;a.children("#review_form").show("fast"),e("html, body").animate({scrollTop:r-rey.vars.adminBar-25},"fast",(function(e){return--e*e*e+1})),setTimeout((function(){e(document).trigger("reycore/woocommerce/reviews/loaded")}),100)}));var t=e(".rey-ajaxRatings-btn");if(t.length){var a=JSON.parse(t.attr("data-config")||"{}");if(a.qid&&a.total){var r,o=a.total,i=0,s=e("#reviews ol.commentlist"),n="newest",c=function(c,d){r&&r.abort(),r=rey.ajax.request("load_more_reviews",{data:{qid:a.qid,page:i,order:c||n},cb:function(a){t.removeClass("--disabled"),a.success&&a.data?(e("li.__loader",s).remove(),e(a.data).appendTo(s),t.removeClass("--loading"),i++,e(".__count",t).attr("data-current",i),i===o&&t.addClass("--disabled").removeClass("--loading"),d&&d.removeClass("--disabled"),e(document).trigger("reycore/woocommerce/reviews/loaded"),r=!1):t.addClass("--disabled").removeClass("--loading")}})};c(),t.on("click",(function(e){e.preventDefault(),t.addClass("--loading"),c()})),e(document).on("click",".rey-reviewSort li[data-key]",(function(){var a=e(this),r=a.parent(),o=a.attr("data-key");r.addClass("--disabled"),s.empty(),e('<li class="__loader"><div class="rey-lineLoader"></div></li>').appendTo(s),t.addClass("--disabled"),e(".__count",t).attr("data-current",1),a.siblings().removeClass("--active"),a.addClass("--active"),i=0,c(o,r),n=o}))}}},this.runLazyUpsells=function(){if(this.$productPage.length){var t=e(".__placeholder-wrapper.upsells.products");if(t.length){var a=rey.vars.page_id;a&&rey.frontend.inView({target:t,once:!0,cb:function(){rey.ajax.request("upsells_products",{ss:"upsells_products_"+a,data:{id:a},cb:function(a){if(a.data){t.replaceWith(a.data);var r=document.querySelector(".upsells.products");rey.hooks.doAction("product/loaded",r.querySelectorAll("li.product"));var o=e(r);e(document).trigger("reycore/woocommerce/carousel/loaded",[o]),e(document).trigger("reycore/elementor/content/lazy_loaded",[o])}}})}})}}},this.runLazyRelated=function(){if(this.$productPage.length){var t=e(".__placeholder-wrapper.related.products");if(t.length){var a=rey.vars.page_id;a&&rey.frontend.inView({target:t,once:!0,cb:function(){rey.ajax.request("related_products",{ss:"related_products_"+a,data:{id:a},cb:function(a){if(a.data){t.replaceWith(a.data);var r=document.querySelector(".related.products");rey.hooks.doAction("product/loaded",r.querySelectorAll("li.product"));var o=e(r);e(document).trigger("reycore/woocommerce/carousel/loaded",[o]),e(document).trigger("reycore/elementor/content/lazy_loaded",[o])}}})}})}}},this.runLazyReviews=function(){var t=this,a=e(".woocommerce-Reviews.--ajax");if(a.length){if(a.closest(".rey-summaryAcc").length)return e(document).one("click",".rey-summaryAcc-accItem.--reviews",(function(){t.ajaxLoadMoreReviews()})),void e(document).one("click",".reviews_acctab > a.--reviews",(function(){t.ajaxLoadMoreReviews()}));var r=a.closest(".woocommerce-Tabs-panel").length;if(r&&a.is(":visible"))return t.ajaxLoadMoreReviews();a.is(":visible")||r||!e(".rey-reviewsBtn").length?r?e(document).one("click",".reviews_tab > a",(function(){t.ajaxLoadMoreReviews()})):rey.hooks.addAction("first_interaction",(function(){setTimeout((function(){t.ajaxLoadMoreReviews()}),2e3)})):e(document).one("click",".rey-reviewsBtn",(function(){t.ajaxLoadMoreReviews()}))}},this.customTextNearPrice=function(){var t=e("span[data-price-text]",this.$productPage);t.length&&rey.ajax.request("pdp_custom_price_text",{data:{pid:t.attr("data-price-text")},params:{cache:!1},cb:function(e){e.data&&t.replaceWith(e.data)}})},this.init()};e(document).ready((function(){new t}));var a={};e(document.body).on("found_variation reset_data",".variations_form",(function(t,r){var o=e(this).closest("div.product"),i=e(".rey-estimatedDelivery",o);if(i.length){var s=o.attr("id");a[s]||(a[s]=i.html()),r&&r.estimated_delivery?i.html(r.estimated_delivery):i.html(a[s])}}))}(jQuery);