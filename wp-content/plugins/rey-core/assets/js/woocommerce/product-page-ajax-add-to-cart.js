!function(a){"use strict";var r,e=function(){r||(r=!0,a(document).on("submit","form.cart:not(.auction_form)",(function(r){if(rey.params.single_ajax_add_to_cart&&"yes"!==wc_add_to_cart_params.cart_redirect_after_add){var e=a(this),o=a(".single_add_to_cart_button:not(.disabled)",e);if(!o.parents("div.product").hasClass("product-type-external"))if(r.preventDefault(),void 0!==rey.params.ajaxurl&&void 0!==rey.params.ajax_nonce){var t=e.serialize()||"";t+="&action=reycore_ajax_add_to_cart",o.val()&&(t+="&add-to-cart="+o.val()),t=rey.hooks.applyFilters("reycore/woocommerce/addtocart_data",t),a(document.body).trigger("adding_to_cart",[o,t]),a.ajax({type:"POST",url:rey.params.wc_ajax_url.toString().replace("%%endpoint%%","reycore_ajax_add_to_cart"),dataType:"json",data:t,beforeSend:function(r){a(".woocommerce-error",e).remove(),o.removeClass("added").addClass("loading")},success:function(r){if(r)if(void 0===r.success||!1!==r.success){var t=window.location.toString();if(t=t.replace("add-to-cart","added-to-cart"),r.error&&r.product_url)window.location=r.product_url;else if("yes"!==wc_add_to_cart_params.cart_redirect_after_add)if("checkout"!==rey.params.after_add_to_cart){o.removeClass("loading");var d=r.fragments;d&&a.each(d,(function(r){a(r).addClass("updating")})),d&&a.each(d,(function(r,e){a(r).replaceWith(e)})),void 0!==r.notices&&""!==r.notices&&r.notices.indexOf("error")>0?(e.prepend(r.notices),o.addClass("not-added")):(o.addClass("added"),a(document.body).trigger("added_to_cart",[d,r.cart_hash,o])),a(document).trigger("reycore/woocommerce/after_added_to_cart",[r])}else window.location=rey.params.checkout_url;else window.location=wc_add_to_cart_params.cart_url}else console.warn(r.data)},error:function(){console.warn("Ajax add to cart error!")}})}else console.warn("Ajax url undefined")}})))};a(document).ready((function(){e()})),rey.hooks.addAction("ajax_variation_popup/after_open",(function(){e()})),a(document).on("reycore/after_quickview",(function(a,r){e()}))}(jQuery);