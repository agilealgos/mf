!function(e){"use strict";var t=function(){this.editor_params="undefined"!=typeof reyElementorEditorParams?reyElementorEditorParams:{};var t=this;this.init=function(){"undefined"!=typeof elementor&&(this.setContainerPadding(),this.runCallbacks(),this.addLinks(),this.addQuickMenu(),this.modifyLibraryElement(),this.addCustomIcons(),this.addScrollBarProp(),this.events())},this.addScrollBarProp=function(){elementor.once("preview:loaded",(function(){var e=elementor.$preview.width()-elementor.$previewContents.width();elementor.$previewContents[0].documentElement.style.setProperty("--scrollbar-width",e+"px")}))},this.addCustomIcons=function(){e.each([{template:"#tmpl-elementor-navigator__elements",search:'<i class="{{{ icon }}}"></i>'},{template:"#tmpl-elementor-element-library-element",search:'<i class="{{ icon }}" aria-hidden="true"></i>'}],(function(t,n){var o=e(n.template);if(o.length){var i=o.text(),a="";a+='<# var cssClass = "rey-editor-icons"; #>',a+="<# if ( icon.indexOf(cssClass) !== -1 ) { #>",a+='<# var iconName = reyElementorEditorParams.elements_icons_sprite_path + "#"; #>',a+='<# iconName += icon.replace(cssClass + " --", ""); #>',a+='<svg class="{{ cssClass }}" aria-hidden="true" role="img"><use href="{{iconName}}" xlink:href="{{iconName}}"></use> </svg>',a+="<# } else { #>",a+=n.search,a+="<# } #>",i=i.replace(n.search,a),o.text(i)}}))},this.events=function(){e(document).on("change",".js-insertSnippetToEditor",this.doInsertSnippet),e(document).on("click",".js-insertToEditor",this.doInsertSnippet),elementor.hooks.addAction("panel/open_editor/column",this.update_column_width),elementor.hooks.addAction("panel/open_editor/section",this.handle_flex_wrap),elementor.channels.editor.on("rey:editor:hide_header",this.handle_hide_header),elementor.channels.editor.on("rey:editor:hide_gs",this.handle_hide_gs),elementor.channels.editor.on("rey:editor:set_wc_page",this.handle_set_wc_page),elementor.channels.editor.on("rey:editor:set_opt",this.handle_set_opt),elementor.channels.editor.on("rey:editor:apply_preview",this.handle_apply_preview),elementor.hooks.addFilter("editor/style/styleText",this.section_custom_css),elementor.channels.editor.on("section:activated",this.sectionActivated),elementor.channels.editor.on("rey:header_nav_visibility",this.headerNavVisibility)},this.runCallbacks=function(){if(void 0!==elementor.settings.page){elementor.settings.page.addChangeCallback("rey_container_spacing",(function(e){t.containerPaddingValue=e})),elementor.settings.page.addChangeCallback("rey_stretch_page",(function(t){var n=e(".rey-siteContainer",elementor.$previewContents),o="rey-stretchPage";t==o?n.addClass(o):n.removeClass(o)})),elementor.settings.page.addChangeCallback("header_layout_type",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){elementor.getPanelView().setPage("page_settings")}))}})})),elementor.settings.page.addChangeCallback("header_position",(function(t){var n=e(".rey-siteHeader",elementor.$previewContents);e(".elementor-control-header_position .elementor-control-content");n.removeClass((function(e,t){return(t.match(/(^|\s)header-pos--\S+/g)||[]).join(" ")}));var o=elementor.settings.page.getSettings();""==t?n.addClass("header-pos--"+o.settings.header_position):n.addClass("header-pos--"+t)})),elementor.settings.page.addChangeCallback("footer_layout_type",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){elementor.getPanelView().setPage("page_settings")}))}})})),elementor.settings.page.addChangeCallback("gs_type",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview()}})})),elementor.settings.page.addChangeCallback("rey_custom_logo",(function(e){elementor.saver.update({onSuccess:function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){elementor.getPanelView().setPage("page_settings")}))}})}));var n=function(e){$e.run("document/save/update").then((function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){$e.route("panel/page-settings/settings")}))}))};elementor.settings.page.addChangeCallback("rey_templates_type",n),elementor.settings.page.addChangeCallback("rey_templates_grid",n)}},this.addLinks=function(){void 0!==elementor.config.rey&&void 0!==elementor.config.rey.global_links&&e.each(elementor.config.rey.global_links,(function(e,t){void 0!==t.show_in_el_menu&&!1===t.show_in_el_menu||elementor.modules.layouts.panel.pages.menu.Menu.addItem({icon:t.icon,title:t.title,link:t.link,type:"link",newTab:!0},"settings")}))},this.addQuickMenu=function(){if(void 0!==elementor.config.rey){var t=e("#tmpl-elementor-panel-footer-content"),n='<div id="elementor-panel-footer-navigator',o=t.text(),i="",a=reyElementorEditorParams.button_text;reyElementorEditorParams.icon&&(a='<img src="'+reyElementorEditorParams.icon+'" /><span class="elementor-screen-only">'+reyElementorEditorParams.title+"</span>"),i+='<div id="elementor-panel-footer-rey" class="elementor-panel-footer-tool elementor-toggle-state tooltip-target" data-tooltip="'+reyElementorEditorParams.title+'"><span id="elementor-panel-footer-rey-label">'+a+"</span>",i+='<div class="elementor-panel-footer-sub-menu-wrapper"><div class="elementor-panel-footer-sub-menu">',void 0!==elementor.config.rey.global_links&&e.each(elementor.config.rey.global_links,(function(e,t){var n=void 0!==t.class?t.class:"";i+='<a href="'+t.link+'" target="_blank" class="elementor-panel-footer-sub-menu-item '+n+'"><i class="elementor-icon '+t.icon+'" aria-hidden="true"></i><span class="elementor-title">'+t.title+"</span></a>"})),i+="</div></div>",i+="</div>",i+=n,o=o.replace(n,i),t.text(o)}},this.modifyLibraryElement=function(){if(reyElementorEditorParams.branding){var t=e("#tmpl-elementor-element-library-element"),n=t.text(),o='<div class="elementor-element"';n=n.replace(o,'<div class="elementor-element" data-widget-type="{{ widgetType || obj.widgetType }}"'),t.text(n)}},this.doInsertSnippet=function(t){t.preventDefault();var n=e(".ace_editor",e(this).closest(".elementor-control"));if(n.length&&void 0!==n[0].env.editor){var o=n[0].env.editor,i=o.session.getValue();if(e(this).is("span"))var a=e(this).text();else if(e(this).is("select"))a=e(this).val();o.focus(),o.navigateFileEnd(),i&&(a="\n"+a),o.session.insert(o.getCursorPosition(),a)}},this.update_column_width=function(e,t,n){var o=t.get("settings"),i=n._parent.model.get("settings").get("rey_flex_wrap");o.set("section_rey_flex_wrap",i)},this.handle_wc_checkout=function(e,t){void 0!==t.model.get("settings").changed.layout&&elementor.reloadPreview()},this.handle_flex_wrap=function(t,n,o){n.get("settings").on("change",(function(t){if(void 0!==t.changed.rey_flex_wrap){var i=n.get("elements");i.length>0&&e.each(i.models,(function(n,i){var a=i.get("settings");if(a.set("section_rey_flex_wrap",t.changed.rey_flex_wrap),""!=t.changed.rey_flex_wrap&&""==a.get("rey_flex_wrap_inline_size")){a.set("rey_flex_wrap_inline_size",100);var r=e("> .elementor-container > .elementor-column.elementor-top-column",o.$el);reyElementorEditorParams.optimized_dom||(r=e("> .elementor-container > .elementor-row > .elementor-column.elementor-top-column",o.$el)),r.each((function(t,n){e(n).attr("data-col",100)}))}}))}}))},this.handle_hide_header=function(t){e("button",t.$el).toggleClass("--active"),e(".rey-siteHeader",elementor.$previewContents).toggleClass("rey--disable-header")},this.handle_hide_gs=function(t){e("button",t.$el).toggleClass("--active"),e("body",elementor.$previewContents).toggleClass("rey--disable-gs")},this.handle_set_wc_page=function(e){var t=e.$el,n=e.ui.button;t.css("pointer-events","none"),n.css("opacity","0.5"),elementorCommon.ajax.load({action:"rey_set_wc_page",data:{page:e.model.attributes.default},success:function(e){e&&t.css("display","none")}})},this.handle_set_opt=function(e){var t=e.$el,n=e.ui.button;t.css("pointer-events","none"),n.css("opacity","0.5"),elementorCommon.ajax.load({action:"rey_set_opt",data:{opt:e.model.attributes.default},success:function(e){t.css("pointer-events",""),n.css("opacity",""),elementor.reloadPreview()}})},this.handle_apply_preview=function(e){$e.run("document/save/update").then((function(){elementor.reloadPreview(),elementor.once("preview:loaded",(function(){$e.route("panel/page-settings/settings")}))}))},this.replace_font_list_names=function(){var t=e("#tmpl-elementor-control-font-content"),n=t.text(),o=new RegExp('<option value="{{ fontName }}">{{{ fontName }}}</option>',"g");n=n.replace(o,'<# var typo_names = reyElementorEditorParams.rey_typography;  var fontNameModified = fontName;  if( fontName === "var(--primary-ff)" ) { fontNameModified = typo_names.primary; }  else if( fontName === "var(--secondary-ff)" ) { fontNameModified = typo_names.secondary; } #><option value="{{ fontName }}">{{{ fontNameModified.replace("__", "") }}}</option>'),t.text(n)},this.section_custom_css=function(e,t){if(!t)return e;var n=t.model,o=n.get("settings").get("rey_custom_css");if(!o)return e;var i=n.get("elType"),a=".elementor-element.elementor-element-"+n.get("id"),r={"SELECTOR-INNER":a+{section:" > .elementor-container",container:" > .e-con-inner",column:" > .elementor-widget-wrap",widget:" > .elementor-widget-container"}[i],SELECTOR:a,"SECTION-ID":a};return Object.keys(r).forEach((t=>{var n=new RegExp(t,"g");e+=o.replace(n,r[t])})),e},this.sectionActivated=(e,t)=>{this.section_custom_css__handle_label(e,t),this.marginPlaceholders(e,t)},this.section_custom_css__handle_label=function(t,n){var o=n.getOption("editedElementView").getEditModel(),i=function(t,n){var o=t.get("rey_custom_css"),i=e(".elementor-control-section_rey_custom_CSS .elementor-panel-heading-title .rey-hasStylesNotice",n);""!==o?i.addClass("--visible"):i.removeClass("--visible")},a=o.get("settings");i(a,n.$el),a.on("change",(function(){i(a,n.$el)}))},this.setContainerPadding=function(){this.containerPaddingValue=reyElementorEditorParams.rey_container_spacing;var e=elementor.settings.page.getSettings();e.settings&&e.settings.rey_container_spacing&&(this.containerPaddingValue=e.settings.rey_container_spacing)},this.marginPlaceholders=function(n,o){var i=e(".elementor-control-margin.elementor-control-type-dimensions, .elementor-control-rey_margin_all.elementor-control-type-dimensions",o.$el);if(i.length&&"section"===o.getOption("editedElementView").getEditModel().get("elType")){var a=e('input[data-setting="left"]',i),r=e('input[data-setting="right"]',i),s=a.length&&r.length;t.containerPaddingValue&&s&&(a.attr("placeholder",t.containerPaddingValue),r.attr("placeholder",t.containerPaddingValue),a.attr("disabled")&&"0"==a.val()&&a.val(""),r.attr("disabled")&&"0"==r.val()&&r.val(""))}},this.headerNavVisibility=function(e){e.container.view.$el.toggleClass("editmode_show_panel")},this.init()};e(window).on("elementor:init",(function(){new t}));var n=elementor.modules.controls.Select2.extend({cache:null,isTitlesReceived:!1,getSelect2Placeholder:function(){return{id:"",text:this.model.get("placeholder")}},getSelect2DefaultOptions:function(){var t=this,n=t.model.get("query_args");if(n&&n.post_type&&0===n.post_type.indexOf("{")){var o=n.post_type.slice(1,-1);n.post_type=t.options.container.settings.get(o)}return e.extend(elementor.modules.controls.Select2.prototype.getSelect2DefaultOptions.apply(this,arguments),{allowClear:!0,placeholder:this.getSelect2Placeholder(),ajax:{transport:function(e,t,o){return elementorCommon.ajax.addRequest("rey_query_control_filter_autocomplete",{data:{q:e.data.q,query_args:n},success:t,error:o})},data:function(e){return{q:e.term}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1})},getValueTitles:function(){var e=this,t=this.getControlValue(),n=this.model.get("query_args"),o=n.type;t&&n&&(_.isArray(t)||(t=[t]),elementorCommon.ajax.load({action:"rey_query_control_value_titles",unique_id:e.cid+o,data:{query_args:n,values:t},success:function(t){e.isTitlesReceived=!0,e.model.set("options",t),void 0!==e.ui.select&&e.render()},before:function(){e.addSpinner()}}))},addSpinner:function(){this.ui.select.prop("disabled",!0),this.$el.find(".elementor-control-title").after('<span class="elementor-control-spinner">&nbsp;<i class="fa fa-spinner fa-spin"></i>&nbsp;</span>')},onReady:function(){this.ui.select.select2(this.getSelect2Options()),this.isTitlesReceived||this.getValueTitles()}});elementor.addControlView("rey-query",n);var o=elementor.modules.controls.Select2.extend({isDataReceived:!1,theData:{},addSpinner:function(){this.ui.select.prop("disabled",!0),this.$el.find(".elementor-control-title").after('<span class="elementor-control-spinner">&nbsp;<i class="fa fa-spinner fa-spin"></i>&nbsp;</span>')},addEditLink:function(){e(".rey-editMenu-link",this.$el).remove();var t="",n=this.getControlValue();if(n){"string"!=typeof n&&(n=n[0]);var o=this.theData;Object.keys(o).forEach((e=>{n==o[e].id&&void 0!==o[e].link&&(t=o[e].link)})),this.$el.find(".elementor-control-title").append(`<a href="${t}" class="eicon-editor-external-link rey-editMenu-link" target="_blank" title="Edit"></a>`)}},getData:function(){var e=this,t=this.getControlValue(),n=this.model.get("query_args");n.request&&(_.isArray(t)||(t=[t]),n.values=t,elementorCommon.ajax.load({action:"rey_ajax_list_control",unique_id:e.cid,data:n,success:function(t){e.isDataReceived=!0,e.theData=t;var o={};Object.keys(t).forEach((e=>{void 0===t[e].id?o[e]=t[e]:o[t[e].id]=t[e].title})),e.model.set("options",o),void 0!==e.ui.select&&(e.render(),n.edit_link&&e.addEditLink())},before:function(){e.addSpinner()}}))},onInputChange:function(){this.addEditLink()},onReady:function(){this.isDataReceived||this.getData()}});elementor.addControlView("rey-ajax-list",o)}(jQuery);