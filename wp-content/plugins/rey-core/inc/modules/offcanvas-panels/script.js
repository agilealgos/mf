!function(t){"use strict";var e=function(e){var s=this;this.$body=t("body"),this.isOpen=null,this.$panel=!1,this.entryTimeline=!1,this.settings={},this.lazyLoaded=!1,this.$btn=!1,this.init=function(){if(this.args=t.extend({panel_id:!1,btn:!1,legacySettings:{},lazy:!1},e),this.args.lazy)this.lazyLoaded||(this.id=this.args.panel_id,this.args.btn&&(this.$btn=t(this.args.btn)),this.lazyLoadPanel({cache:!0,forceLazy:!0}));else if(this.args.btn)if(this.$btn=t(this.args.btn),this.trigger=this.$btn.attr("data-trigger")||"click",this.pre_events(),Object.keys(this.args.legacySettings).length){if(this.settings=this.args.legacySettings,!this.settings.gs)return void console.info("Missing GSID.");this.id=this.settings.gs;var s=t('.rey-offcanvas-wrapper[data-gs-id="'+this.id+'"]');if(s.length||(s=t('.rey-offcanvas-wrapper[data-legacy-id="'+this.id+'"]')),t('.rey-triggerBtn[data-offcanvas-id="'+this.id+'"]').length&&(s=s.clone().appendTo(this.$body)),!s.length)return void console.info("No public offcanvas sections.");this.makeLegacySettings(s)}else{if(this.id=this.$btn.attr("data-offcanvas-id"),!this.id)return void console.info("Missing GSID.");if(this.$panel=t('.rey-offcanvas-wrapper[data-gs-id="'+this.id+'"]'),!this.$panel.length)return;this.makeSettings()}else if(this.args.panel_id){if(this.id=this.args.panel_id,!this.id)return void console.info("Missing GSID.");if(this.$panel=t('.rey-offcanvas-wrapper[data-gs-id="'+this.id+'"]'),!this.$panel.length)return;this.makeSettings()}return this.isSetup=!0,this.make_panel(),this.bind_events(),this},this.makeSettings=function(){Object.keys(this.args.legacySettings).length||(this.settings.position=this.$panel.attr("data-position")||"left",this.settings.transition=this.$panel.attr("data-transition")||"",this.settings.transition_duration=this.$panel.attr("data-transition-duration")||"700",this.settings.shift="yes"===this.$panel.attr("data-shift"),this.settings.animate_inside="yes"===this.$panel.attr("data-animate-cols"),this.settings.close_position=this.$panel.attr("data-close-position")||"inside",this.settings.close_rotate="yes"===this.$panel.attr("data-close-rotate"))},this.makeLegacySettings=function(e){Object.keys(this.args.legacySettings).length&&(this.$panel=e.attr({"data-id":this.settings.id,"data-transition":this.settings.transition,"data-transition-duration":this.settings.transition_duration,"data-position":this.settings.position,"data-close-position":this.settings.close_position,"data-close-rotate":this.settings.close_rotate,"data-animate-cols":this.settings.animate_inside,"data-shift":this.settings.shift,"data-legacy-id":this.id}).removeAttr("data-gs-id"),t(".rey-offcanvas-closeText",this.$panel).text(this.settings.close_text))},this.bind_events=function(){this.$panel&&t('a[href*="#"]:not([href$="#"])',this.$panel).on("click",(function(){s.close()})),t(".rey-offcanvas-close",this.$panel).on("click",(function(t){t.preventDefault(),s.close()})),t(document).on("reycore/offcanvas_panel/open",(function(e,s){t(":focusable",s.$panel).first().trigger("focus").css("outline","none")})),t(document).on("reycore/offcanvas_panel/close",(function(t,e){e.$btn.length&&e.$btn.trigger("focus")}))},this.pre_events=function(){var t=this.trigger;rey.vars.is_desktop||(t="click"),"click"===t?this.$btn.on("click",(function(t){t.preventDefault(),s.isOpen?s.close():s.open()})):"hover"===t&&this.$btn.on("mouseenter",(function(t){s.open()})).on("mouseleave",(function(t){s.close()}))},this.make_panel=function(){this.$contentWrapper=t(".rey-offcanvas-contentWrapper",this.$panel),this.$content=t(".rey-offcanvas-content",this.$panel),this.$closeBtn=t(".rey-offcanvas-close",this.$panel),this.settings.animate_inside&&(t(".elementor-column-wrap.elementor-element-populated, .elementor-widget-wrap.elementor-element-populated",this.$panel).each((function(e,s){t(s).css("transition-delay",75*e+"ms")})),this.$panel.addClass("--animate-inside")),this.settings.close_rotate&&this.$closeBtn.addClass("--close-rotate")},this.create_anime=function(){if(!this.timelineExists&&"undefined"!=typeof anime&&"basic"!==this.settings.transition){switch(this.entryTimeline=anime.timeline({easing:"easeInOutQuart",duration:parseInt(this.settings.transition_duration),autoplay:!1,begin:function(){s.isOpen=!0,s.$body.addClass("--offcanvas-active")},complete:function(){s.$panel.addClass("--active")}}),this.settings.transition){default:var e={left:{translateX:["-100%","0%"]},right:{translateX:["100%","0%"]},top:{translateY:["-100%","0%"]},bottom:{translateY:["100%","-100%"]}};this.entryTimeline.add(t.extend({targets:this.$contentWrapper[0]},e[this.settings.position]));break;case"slideskew":e={left:{opacity:[0,1],translateX:["-120%","0%"],skewX:["-7deg","0deg"]},right:{opacity:[0,1],translateX:["120%","0%"],skewX:["7deg","0deg"]},top:{opacity:[0,1],translateY:["-120%","0%"],skewY:["-7deg","0deg"]},bottom:{opacity:[0,1],translateY:["120%","-120%"],skewY:["7deg","0deg"]}};this.entryTimeline.add(t.extend({targets:this.$contentWrapper[0]},e[this.settings.position]));break;case"curtain":var i,n;i=t(".rey-offcanvas-mask.--m1",this.$panel).length?t(".rey-offcanvas-mask.--m1",this.$panel):t('<div class="rey-offcanvas-mask --m1" />').prependTo(this.$contentWrapper),n=t(".rey-offcanvas-mask.--m2",this.$panel).length?t(".rey-offcanvas-mask.--m2",this.$panel):t('<div class="rey-offcanvas-mask --m2" />').prependTo(this.$contentWrapper);e={left:{c:{scaleX:[0,1]},m:{scaleX:[1,0]}},right:{c:{scaleX:[0,1]},m:{scaleX:[1,0]}},top:{c:{scaleY:[0,1]},m:{scaleY:[1,0]}},bottom:{c:{scaleY:[0,1]},m:{scaleY:[1,0]}}};var a={m1:"-="+.75*parseInt(this.settings.transition_duration),m2:"-="+.4*parseInt(this.settings.transition_duration)};this.entryTimeline.add(t.extend({targets:this.$contentWrapper[0]},e[this.settings.position].c)).add(t.extend({targets:i[0]},e[this.settings.position].m),a.m1).add(t.extend({targets:n[0]},e[this.settings.position].m),a.m2)}this.timelineExists=!0}},this.refreshScroll=function(){this.$content&&this.$content.length&&"undefined"!=typeof SimpleScrollbar&&SimpleScrollbar.initEl(this.$content[0])},this.animate_panel=function(){"undefined"!=typeof anime&&this.entryTimeline&&this.entryTimeline.play()},this.open=function(){if(this.$panel.length)if(this.args.lazy||this.lazyLoaded||!this.$panel.is("[data-lazy-config]")){if(this.$panel.removeClass("--hidden"),this.refreshScroll(),this.create_anime(),rey.frontend.panels.init(this.close.bind(this)),rey.frontend.overlay.open("site"),rey.frontend.scroll.disable(),this.settings.shift&&(this.$body.addClass("--offcanvas-shift"),this.$body.addClass("--offcanvas-shift--"+this.settings.position)),this.$btn&&this.$btn.addClass("--active"),t(document).trigger("reycore/offcanvas_panel/open",[this]),"basic"===this.settings.transition)return this.isOpen=!0,this.$body.addClass("--offcanvas-active"),void this.$panel.addClass("--active");this.animate_panel()}else this.lazyLoadPanel()},this.close=function(){if(this.$panel&&this.isOpen){rey.frontend.panels.reset();var e=function(){s.$body.removeClass("--offcanvas-active"),s.$body.removeClass("--offcanvas-shift"),s.$body.removeClass("--offcanvas-shift--"+s.settings.position),s.$panel.removeClass("--active"),s.$btn&&s.$btn.removeClass("--active"),rey.frontend.overlay.close(),rey.frontend.scroll.enable(),t(document).trigger("reycore/offcanvas_panel/close",[s])};if("basic"===this.settings.transition)e();else{anime(t.extend({easing:"easeInOutQuart",duration:parseInt(this.settings.transition_duration)/2,targets:this.$contentWrapper[0],complete:e},{left:{translateX:["0%","-100%"]},right:{translateX:["0%","100%"]},top:{translateY:["0%","-100%"]},bottom:{translateY:["-100%","100%"]}}[this.settings.position]))}this.isOpen=!1}},this.lazyLoadPanel=function(e){if(""!==this.id){var i=!1;this.$btn&&(this.$btn.addClass("--loading"),i=t('<i class="__loader"></i>').appendTo(this.$btn));var n={gs:s.id};if(e)n=t.extend(n,e);else{var a=JSON.parse(this.$panel.attr("data-lazy-config")||"{}");"cache"in a&&(n.cache=a.cache)}rey.ajax.request("get_offcanvas_panel",{ss:!0,data:n,cb:function(e){if(s.lazyLoaded=!0,s.$panel)n=t(".rey-offcanvas-content",s.$panel);else var n=t("body");t(e.data).appendTo(n),s.$panel=t('.rey-offcanvas-wrapper[data-gs-id="'+s.id+'"]'),s.makeSettings(),s.makeLegacySettings(s.$panel),s.make_panel(),s.bind_events(),t(document).trigger("reycore/elementor/content/lazy_loaded",[s.$panel]),s.open(),s.$btn&&(s.$btn.removeClass("--loading"),i&&i.remove())}})}},this.init()};t(document).ready((function(){t(".js-triggerBtn[data-offcanvas-settings]").each((function(s,i){new e({btn:i,legacySettings:t.extend({id:"",gs:"",shift:!0,trigger:"click",position:"left",transition:"",transition_duration:700,animate_inside:!0,close_position:"inside",close_text:"",close_rotate:!1},JSON.parse(t(i).attr("data-offcanvas-settings")||"{}"))})})),t(".js-triggerBtn[data-offcanvas-id]").each((function(t,s){new e({btn:s})})),t("a[data-offcanvas-id]").each((function(s,i){t(i).on("click",(function(s){if(s.preventDefault(),a)a.open();else{var n=t(i).attr("data-offcanvas-id");if(n&&!isNaN(n)){var a=new e({panel_id:parseInt(n)});a.open()}}}))}));var s={};t("a[href^='#offcanvas-']").on("click",(function(i){i.preventDefault();var n=t(this),a=n.attr("href").split("-")[1];if(a&&!isNaN(a))if(s[a])s[a].open();else{var o={panel_id:parseInt(a),btn:n};t('.rey-offcanvas-wrapper[data-gs-id="'+a+'"]').length||(o.lazy=!0),s[a]=new e(o)}})),t(document).on("reycore/offcanvas/open",(function(t,s){new e({panel_id:s}).open()}))}))}(jQuery);