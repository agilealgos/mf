!function(t){"use strict";var a={selectedAttributes:{},createdVariationData:!1,init:function(){this.$modal=t(".rey-requestQuote-modal"),this.$modalForm=t("form",this.$modal),this.$modalForm.length&&(this.$btn=t(".js-requestQuote"),this.variationAware=reycoreRequestQuoteParams.variation_aware,this.$hiddenId=t('<input type="hidden" name="rey-request-quote-product-id" />').appendTo(this.$modalForm),this.handleVariations(),this.assignId(),this.events())},events:function(){var a,e=this;"undefined"!=typeof ReyModal&&(a=new ReyModal({linkAttributeName:!1,catchFocus:!1,closeOnEsc:!0,backscroll:!0})).init(),t(document).on("click",".js-requestQuote",(function(i){i.preventDefault();var n=t(this),o=n.attr("data-id")||0,s=n.closest(".rey-quickviewPanel");e.variationAware&&n.hasClass("--disabled")?window.alert(reycoreRequestQuoteParams.disabled_text):(s.length&&(o=t("div.product",s).attr("data-id")||0)&&e.assignId(o),a&&a.open({width:550,content:".rey-requestQuote-modal",wrapperClass:"rey-requestQuote-modalWrapper",id:"rq-"+o,closePosition:reycoreRequestQuoteParams.close_position}))})),t(document).on("woocommerce_variation_has_changed",".variations_form",(function(a){a.stopImmediatePropagation();var i=t(a.target).find('input[type="hidden"][name="variation_id"]').val();i&&e.assignId(i)})).on("woocommerce_update_variation_values","div.product .variations_form",(function(a){t(this).children("table.variations").length&&(e.$form=t(this),e.createdVariationData||(e.createVariationData(),e.createdVariationData=!0),e.updateVariationData())}))},handleVariations:function(){if(this.variationAware){var a=this;t(document).on("hide_variation reset_data",".variations_form",(function(t){a.$btn.addClass("--disabled")})).on("show_variation",".variations_form",(function(t){a.$btn.removeClass("--disabled")}))}},createVariationData:function(){this.$selectLists=t("select[data-attribute_name]",this.$form),this.$selectLists.length&&(this.$productDataHolder=t(".rey-requestQuote-productData",this.$modal),this.$variationDataField=t('<input type="hidden" name="rey-request-quote-variation-data" />').appendTo(this.$modalForm),this.$variationDataContainer=t('<span class="__variation-data"></span>').appendTo(this.$productDataHolder),this.updateVariationData())},updateVariationData:function(){if(this.$selectLists.length){var a=this;this.$selectLists.each((function(e,i){var n=t(i),o=n.attr("data-attribute_name").replace("attribute_",""),s=t('label[for="'+o+'"]',a.$form).text();a.selectedAttributes[s]=n.val()})),t.isEmptyObject(this.selectedAttributes)||(t.each(this.selectedAttributes,(function(e,i){t('.__aname[data-attr="'+e+'"]',a.$variationDataContainer).length?t('.__aname[data-attr="'+e+'"]',a.$variationDataContainer).next(".__aval").text(i):t('<span class="__aname" data-attr="'+e+'">'+e+'</span><span class="__aval">'+i+"</span>").appendTo(a.$variationDataContainer)})),this.$variationDataField.val(JSON.stringify(this.selectedAttributes)))}},assignId:function(t){t=t||this.$modal.attr("data-id"),this.$hiddenId.val(t)}};t(document).ready((function(){a.init()}))}(jQuery);