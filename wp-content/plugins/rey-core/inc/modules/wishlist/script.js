!function(t){"use strict";var e={init:function(){return this.cookie_key="rey_wishlist_ids_"+rey.params.site_id,this.logged_in=rey.params.wishlist_get_results,this.$notice=t(".rey-wishlist-notice-wrapper"),this},setCookie:function(t,e){var i={};rey.params.wishlist_expire&&(i.expires=parseInt(rey.params.wishlist_expire)),Cookies.set(t,e,i)},setProduct:function(e){if("undefined"!=typeof Cookies){e=parseInt(e);var i=this.getProducts();-1===i.indexOf(e)&&(i.push(e),this.setCookie(this.cookie_key,i.join("|")),t(document).trigger("reycore/woocommerce/wishlist/added_product",[i,e]))}},removeProduct:function(e,i,s){if("undefined"!=typeof Cookies){e=parseInt(e);var o=this.getProducts();o.splice(i,1),this.setCookie(this.cookie_key,o.join("|")),s||t(document).trigger("reycore/woocommerce/wishlist/removed_product",[o,e])}},updateCounters:function(e){e||(e=this.getProducts());var i=t(".rey-wishlistCounter-number"),s=e.length;i.attr("data-count",s||"")},save:function(i){i||(i=this.getProducts()),this.logged_in&&(t(".rey-wishlistBtn").addClass("--disabled"),rey.ajax.request("wishlist_add_to_user",{params:{cache:!1},cb:function(i){e.animateButtons(),t(".rey-wishlistBtn").removeClass("--disabled --doing")}}))},getProducts:function(){if("undefined"!=typeof Cookies){var t=Cookies.get(this.cookie_key);return t?t.split("|").map((function(t){return parseInt(t)})):[]}},animateButtons:function(e){var i=t(e?".rey-wishlistBtn[data-id="+e+"]":".rey-wishlistBtn.--doing");i.addClass("--animate"),setTimeout((function(){i.removeClass("--animate")}),500)},toggleButtonAttributes:function(e,i){var s;i?(e.addClass("--in-wishlist"),s=rey.params.wishlist_text_rm):(e.removeClass("--in-wishlist"),s=rey.params.wishlist_text_add),e.attr({title:s,"aria-label":s}),e.is("[data-rey-tooltip]")&&e.attr("data-rey-tooltip",s);var o=t(".rey-wishlistBtn-text",e);o.length&&o.text(s)},showNotice:function(){if("notice"===rey.params.wishlist_after_add){this.$notice.removeClass("--hidden").addClass("--visible");var i=new function(t,e){var i,s,o=e;this.pause=function(){window.clearTimeout(i),o-=Date.now()-s},this.resume=function(){s=Date.now(),window.clearTimeout(i),i=window.setTimeout(t,o)},this.resume()}((function(){e.$notice.removeClass("--visible")}),3200);i.resume(),t(".rey-wishlist-notice",this.$notice).on("mouseenter",(function(){i.pause()})).on("mouseleave",(function(){i.resume()}))}}},i=function(){var i=this;this.isWishlistPage=!1,this.init=function(){this.isWishlistPage=t("body.rey-wishlist-page").length,this.$siteMain=t("body.rey-wishlist-page .rey-siteContent"),this.$emptyPage=t(".rey-wishlist-emptyPage",this.$siteMain),this.isWishlistPage&&(this.base=e.init(),this.refreshData(),this.getShareId(),this.checkPageIds(),this.cleanupPage(),this.events())},this.events=function(){t(document).on("reycore/woocommerce/wishlist/added_product reycore/woocommerce/wishlist/removed_product",(function(t,e,s){i.cleanupPage()}))},this.refreshData=function(){this.$wishlistWrapper=t(".rey-wishlistWrapper",this.$siteMain),this.hideTitle=this.$wishlistWrapper.hasClass("--hide-title")},this.getShareId=function(){this.shareId=!1;var t=rey.util.getUrlVars();Object.keys(t).length&&"wid"in t&&(this.shareId=t.wid)},this.checkPageIds=function(){if(this.shareId)this.getWishlistPageContent();else{var e=i.base.getProducts();e.length||this.$siteMain.removeClass("--loading"),this.$wishlistWrapper.length&&t("li.product",this.$wishlistWrapper).length===e.length||this.getWishlistPageContent()}},this.getWishlistPageContent=function(){this.$siteMain.addClass("--loading");var e={pid:i.$emptyPage.attr("data-id"),"hide-title":this.hideTitle?1:0};this.shareId&&(e.wid=this.shareId),rey.ajax.request("wishlist_get_page_content",{data:e,params:{cache:!1},cb:function(e){if(i.$siteMain.removeClass("--loading"),e.data&&i.$siteMain.length){var s=document.createElement("div");s.innerHTML=e.data,i.$wishlistWrapper[0].append(s),i.refreshData(),i.cleanupPage();var o=s.querySelectorAll("li.product");o.length&&i.$wishlistWrapper.removeClass("--empty"),rey.hooks.doAction("wishlist/loaded",s),rey.hooks.doAction("product/loaded",o),t(document).on("click",".rey-wishlist-removeBtn",(function(e){e.preventDefault();var s=t(this),o=parseInt(s.attr("data-id")||""),a=i.base.getProducts(),n=s.closest("li.product");if(!isNaN(o)){var r=a.indexOf(o);-1!==r&&(i.base.removeProduct(o,r),n.attr("style","").fadeOut(300,(function(){t(this).remove(),t("li.product",i.$wishlistWrapper).length||i.$wishlistWrapper.addClass("--empty")})))}}))}}})},this.cleanupPage=function(){this.isWishlistPage&&(this.$siteMain&&!this.$siteMain.length||t(".woocommerce-notices-wrapper, .rey-loopHeader",this.$siteMain).remove())},this.init()},s=function(){var i=this;this.init=function(){this.base=e.init(),this.mobileCloneTop(),this.base.updateCounters(),this.events()},this.events=function(){t(document).on("click",".rey-wishlistBtn",(function(e){e.preventDefault();var s=t(this),o=parseInt(s.attr("data-id")||""),a=i.base.getProducts();if(!isNaN(o)){if(s.hasClass("--supports-ajax")&&s.addClass("--doing"),s.hasClass("--in-wishlist")){var n=a.indexOf(o);if(-1!==n)return i.base.removeProduct(o,n),void i.base.toggleButtonAttributes(s)}i.base.showNotice(),i.base.setProduct(o),i.base.toggleButtonAttributes(s,!0)}})),t(document).on("click",".rey-wishlistItem-remove",(function(e){e.preventDefault();var s=t(this),o=parseInt(s.attr("data-id")||""),a=i.base.getProducts();if(!isNaN(o)){var n=a.indexOf(o);-1!==n&&(i.base.removeProduct(o,n),s.closest(".rey-wishlistItem").fadeOut(500,(function(){t(this).remove(),t(document).trigger("reycore/woocommerce/wishlist_account/remove")})),i.base.toggleButtonAttributes(t(".rey-wishlistBtn.--in-wishlist[data-id="+o+"]")))}})),t(document).on("reycore/woocommerce/wishlist/added_product reycore/woocommerce/wishlist/removed_product",(function(t,e,s){i.base.updateCounters(e),i.base.save(e),i.base.logged_in||i.base.animateButtons(s)})),t(document).on("reycore/woocommerce/after_login",(function(t,e){i.getSavedProducts()})),rey.hooks.addAction("ajaxfilters/finished",(function(t){i.mobileCloneTop(t)})),rey.hooks.addAction("product/loaded",(function(t){i.mobileCloneTop(t)}))},this.mobileCloneTop=function(e){rey.vars.is_mobile&&t(".rey-wishlistBtn.--show-mobile--top",e||t(document)).each((function(){var e=t(this),i=e.closest("li.product"),s=t(".rey-productThumbnail .rey-thPos--top-right",i);s.length||(s=t('<div class="rey-thPos rey-thPos--top-right"></div>').appendTo(t(".rey-productThumbnail",i))),e.clone().removeClass("--show-mobile--top").addClass("--show-mobile--top-show").appendTo(s)}))},this.getSavedProducts=function(){this.base.logged_in=!0,rey.ajax.request("get_wishlist_data",{params:{cache:!1},cb:function(e){var s=e.data;if(s&&s.length){var o=s.map((function(t){return t.id}));"undefined"!=typeof Cookies&&(i.base.setCookie(i.base.cookie_key,o.join("|")),i.base.updateCounters(o),t(".rey-wishlistBtn").removeClass("--supports-ajax --in-wishlist"),t.each(o,(function(e,s){var o=t(".rey-wishlistBtn[data-id="+s+"]");o.addClass("--in-wishlist"),i.base.logged_in&&o.addClass("--supports-ajax")})),t(document).trigger("reycore/woocommerce/wishlist/get_saved_products",[s]))}}})},this.init()};t(document).ready((function(){t.reyWishlist=new s,new i}));var o=function(e){t.reyWishlist||(t.reyWishlist=new s);var i=t.reyWishlist.base.getProducts();i.length&&(t.reyWishlist.base.toggleButtonAttributes(t("li.product .rey-wishlistBtn",e)),t.each(i,(function(i,s){var o=t('li.product .rey-wishlistBtn[data-id="'+s+'"]',e);o.length&&t.reyWishlist.base.toggleButtonAttributes(o,!0)})))};rey.hooks.addAction("elementor/element/lazy_loaded",(function(t){o(t)})),t(document).on("reycore/elementor/content/lazy_loaded",(function(t,e){o(e)}))}(jQuery);