!function(e){"use strict";var t={running:!1,pid:!1,$body:e("body"),$grid:!1,needsPanelMarkup:!1,hasContent:!1,_panel:"#js-rey-quickviewPanel",isOpen:!1,maybeCloseOverlay:!0,init:function(){this.running||(this.setQvData(!0),this.setupPanel(),this.events(),this.running=!0)},setupPanel:function(){this.$panel=e(this._panel),this.$panel.length?(this.$panelContainer=e(".rey-quickview-container",this.$panel),this.needsPanelMarkup=!1):this.needsPanelMarkup=!0},events:function(){var i=function(i){if(i.preventDefault(),rey.vars.is_desktop||rey.params.quickview_mobile){var a=e(this);t.pid=a.attr("data-id")||a.closest("li.product").attr("data-pid"),t.pid&&(rey.frontend.overlay.open("site"),rey.frontend.overlay.keepOpen=!0,t.$grid=a.closest("ul.products"),t.open())}};e(document).on("click",".js-rey-quickviewBtn",i),rey.params.quickview_only&&(e(document).on("click","li.product .woocommerce-loop-product__link",i),e(document).on("click","li.product .woocommerce-loop-product__title a",i),e(document).on("click","li.product .rey-productSlideshow a",i)),e(document).on("click",".rey-qvNav button",(function(i){i.preventDefault();var a=e(this).attr("data-id");a&&(t.maybeCloseOverlay=!1,t.pid=a,t.open())})),e(document).on("click",".js-rey-quickviewPanel-close",(function(e){e.preventDefault(),t.maybeCloseOverlay=!0,t.close()})),e(document).on("keyup",(function(e){t.isOpen&&27==e.keyCode&&(t.maybeCloseOverlay=!0,t.close())})),e(document.body).on("added_to_cart",(function(e,i,a,n){t.isOpen&&(t.maybeCloseOverlay=!1,t.close())})),e(document).on("reycore/after_quickview_effect",(function(i,a){var n=e(a),o=t.$panel.find(".js-scrollbar");o.length&&"undefined"!=typeof SimpleScrollbar&&rey.vars.is_desktop&&SimpleScrollbar.initEl(o[0]),void 0!==e.fn.wc_variation_form&&e(".variations_form",n).each((function(){e(this).wc_variation_form()})),e(".rey-qvNav-prev",n).attr("data-id",t.quickviewData.prev||""),e(".rey-qvNav-next",n).attr("data-id",t.quickviewData.next||"")})),e(document).on("reycore/after_quickview",(function(i,a){var n=e(a);e(".woocommerce-product-gallery",n).removeClass("woocommerce-product-gallery--vertical"),t.$panel.addClass("--is-visible").removeClass("--is-loading"),e('.rey-qtySelect ~ input[name="quantity"]').remove(),rey.hooks.doAction("refresh_general_html",n),e(".woocommerce-review-link",n).attr("href",e("h1.product_title a",n).attr("href")+"#reviews");var o={easing:"easeInOutQuart",duration:400,complete:function(){e(document).trigger("reycore/after_quickview_effect",[n]),rey.hooks.doAction("after_quickview_effect",n[0])}},r=t.$panelContainer.attr("data-openstyle");if(rey.vars.is_desktop||!rey.params.quickview_only&&!rey.params.quickview_mobile||(r="slide",t.$panelContainer.attr("data-openstyle",r)),"curtain"===r)anime.timeline(o).add({targets:t._panel+" .rey-quickview-container",scaleX:[0,1]}).add({targets:t._panel+" .rey-quickview-mask",scaleX:[1,0],delay:function(e,t){return 250*t}}).add({targets:t._panel+" .rey-productSummary",scale:[1.1,1]},"-=400");else if("slide"===r){o.duration="600",o.easing="easeOutQuart",anime.timeline(o).add({targets:t._panel+" .rey-quickview-container",translateY:[150,0],scale:[.95,1],opacity:[0,1]})}}))},setQvData:function(t){if(t&&(this.quickviewData={prev:"",next:""}),this.$grid){var i=e('li.product[data-pid="'+this.pid+'"]',this.$grid),a="",n="",o=i.prev('li.product:not([data-pid^="x"])');o.length&&(a=o.attr("data-pid"));var r=i.next('li.product:not([data-pid^="x"])');r.length&&(n=r.attr("data-pid")),this.quickviewData.prev=a,this.quickviewData.next=n}},open:function(){if(!this.pid)return this.close();rey.frontend.panels.init(this.close.bind(this)),this.setQvData(),this.$body.addClass("quickview--is-opened"),this.$panel.addClass("--is-loading"),rey.params.quickview_mobile&&!rey.vars.is_desktop&&this.$body.css("overflow","hidden"),this.hasContent&&this.cleanupPanel(),this.isOpen=!0,e(document).trigger("reycore/before_quickview",[this.pid]),rey.ajax.request("get_quickview_product",{data:{id:this.pid,markup:this.needsPanelMarkup,woo_template:e("#tmpl-variation-template").length},cb:function(i){i.data&&(t.needsPanelMarkup&&i.data.markup&&(e(i.data.markup).appendTo(document.body),t.setupPanel()),!e("#tmpl-variation-template").length&&i.data["woo-template-scripts"]&&e(i.data["woo-template-scripts"]).appendTo(document.body),t.render_panel(i.data.content))}})},render_panel:function(t){var i=this.$panelContainer.html(t);e(document).trigger("reycore/after_quickview",[i]),rey.hooks.doAction("after_quickview",i[0]),this.hasContent=!0},close:function(){rey.frontend.panels.reset(),rey.frontend.overlay.keepOpen=null,this.maybeCloseOverlay&&rey.frontend.overlay.close(),this.$body.removeClass("quickview--is-opened"),rey.params.quickview_mobile&&!rey.vars.is_desktop&&this.$body.css("overflow",""),this.$panel&&this.$panel.length&&(this.$panel.removeClass("--is-visible --is-loading"),this.cleanupPanel()),this.isOpen=!1,this.maybeCloseOverlay=!0},cleanupPanel:function(){this.$panelContainer.fadeOut("fast",(function(){e(this).attr("style","").children().remove()}))}};e(document).ready((function(){t.init()})),rey.hooks.addAction("elementor/element/lazy_loaded",(function(e){t.init()})),e(document).on("reycore/elementor/content/lazy_loaded",(function(){t.init()})),rey.hooks.addAction("minicart/assets_ready",(function(){t.init()}))}(jQuery);