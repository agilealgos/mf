!function(){"use strict";var t=function(t){var e=this;this.isOpen,this.init=function(){if(!rey.vars.is_global_section_mode&&(this.config=Object.assign({name:"droppanel",panel:"",trigger:".rey-header-dropPanel-btn",manualOpen:!1,onInit:function(){},onUpdate:function(){},onOpen:function(){},onOpened:function(){},onClose:function(){},onClosed:function(){},closeOnScroll:!1,panelOutside:!1,mobileStretch:!1,alignment:"right",bodyClass:"--drop-panel-active",extraBodyClass:"",elOpenClass:"--is-open",elOpenedClass:"--is-opened",initialDisplay:"block"},t||{}),this.panel=this.config.panel,this.trigger=this.config.trigger,rey.validation.isString(this.panel)&&(this.panel=document.querySelector(this.panel)),rey.validation.isString(this.trigger)&&(this.trigger=this.panel.querySelector(this.trigger)),this.panel&&this.trigger)){if(this.panel.hasAttribute("data-droppanel")){var i=JSON.parse(this.panel.getAttribute("data-droppanel")||"{}");rey.validation.isEmptyObject(i)||Object.keys(i).forEach((t=>{e.config[t]=i[t]}))}if(this.contentHolder=this.panel.querySelector(".rey-header-dropPanel-content"),this.contentHolder||this.config.panelOutside){if(this.atBottom=rey.util.isPositionAtBottomEdge(this.trigger),this.alignment=this.panel.getAttribute("data-align")||this.config.alignment,this.overlaySource=rey.dom.contains(rey.elements.header,this.trigger)?"header":"site",this.hasOverlay=!this.trigger.classList.contains("--no-overlay"),this.panel.setAttribute("data-location",this.config.panelOutside?"outside":"inside"),this.isHover=this.trigger.closest(".--dp-hover"),this.isHover){var n=document.createElement("span");n.classList.add("__safe-spacer"),this.trigger.append(n)}this.config.onInit.call(this),this.events()}}},this.setCoordinates=function(){var t=rey.dom.offset(e.trigger),i=document.body.offsetWidth||window.outerWidth,n={l:t.left<i/2?"unset":"auto",r:t.left>i/2?"unset":"auto"};this.atBottom,rey.dom.setProperties(n,e.panel),e.contentHolder.style.display=e.config.initialDisplay;var s=!1;if(e.config.panelOutside&&(s=!0),e.config.mobileStretch&&(e.panel.classList.add("--mobile-stretch"),s=!0),s){var o={"o-top":t.top,"o-left":t.left,"w-width":i,"t-width":e.trigger.offsetWidth,"t-height":e.trigger.offsetHeight};rey.dom.setProperties(o,e.panel)}},this.events=function(){this.trigger.addEventListener("click",(function(t){t.preventDefault(),rey.util.wait.styles((function(){e.isHover||e.config.manualOpen||(e.isOpen?e.close():e.open())}))})),this.trigger.addEventListener("mouseenter",(function(t){e.isHover&&(e.config.manualOpen||e.open())})),this.panel.addEventListener("mouseleave",(function(t){e.isHover&&(e.config.manualOpen||e.close())})),window.addEventListener("resize",rey.util.debounce(this.setCoordinates,500)),document.addEventListener("scroll",(function(t){e.isOpen&&rey.vars.is_desktop&&e.config.closeOnScroll&&e.close()}))},this.update=function(t){t&&t.call(this),this.events(),this.config.onUpdate.call(this)},this.open=function(){this.isOpen||(this.__coordinatesSet||(this.setCoordinates(),this.__coordinatesSet=!0),this.transitionDuration||(this.transitionDuration=rey.dom.getNumberProperty(this.panel,"--transition-duration",400)),this.config.onOpen.call(this),rey.frontend.panels.init(this.close.bind(this)),this.hasOverlay&&rey.frontend.overlay.open(this.overlaySource),requestAnimationFrame(this.startToggler),this.isOpen=!0)},this.startToggler=function(){e.toggleClasses(!0),e.__startedToggler=!0},this.close=function(){this.isOpen&&(this.config.onClose.call(this),rey.frontend.panels.reset(),this.hasOverlay&&rey.frontend.overlay.close(),requestAnimationFrame((function(){e.toggleClasses(!1)})),this.isOpen=!1)},this.toggleClasses=function(t){rey.elements.body.classList.toggle(this.config.bodyClass,t),this.config.extraBodyClass&&rey.elements.body.classList.toggle(this.config.extraBodyClass,t),this.panel.classList.toggle(this.config.elOpenClass,t),this.trigger.classList.toggle(this.config.elOpenClass,t),setTimeout((()=>{e.onTransitionEnd()}),this.transitionDuration),rey.hooks.doAction("toggle_droppanel",t,this)},this.onTransitionEnd=function(){this.isOpen?(this.config.onOpened.call(this),this.panel.classList.add(this.config.elOpenedClass)):(this.config.onClosed.call(this),this.panel.classList.remove(this.config.elOpenedClass))},this.init()};rey.components.dropPanel=function(){return new t(...arguments)},document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".rey-header-dropPanel:not(.--manual)").forEach((t=>{rey.components.dropPanel({panel:t})}))}))}();